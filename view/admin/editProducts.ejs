<%- include('includes/header') %> 
<%- include('includes/nav') %>

<main>
  <div class="container">
    <div class="page-title-container">
      <div class="row g-0">
        <div class="col-auto mb-3 mb-md-0 me-auto">
          <div class="w-auto sw-md-30">
            <a href="#" class="muted-link pb-1 d-inline-block breadcrumb-back">
              <i data-acorn-icon="chevron-left" data-acorn-size="13"></i>
              <span class="text-small align-middle">Products</span>
            </a>
            <h1 class="mb-0 pb-0 display-4" id="title">Product Detail</h1>
          </div>
        </div>
        
      </div>
    </div>

    <div class="container">
      <form action="/admin/editProduct/?id=<%= Product.id %>" method="post" onsubmit="return validate()" enctype="multipart/form-data">
      
        <div class="row">
          <div class="col-6">
            <div class="mb-3">
              <label for="exampleFormControlInput1" class="form-label"
                >Product Name</label
              >
              <input
                name="productName"
                type="text"
                class="form-control"
                id="productNameInput"
                value="<%= Product.Name %>"
                placeholder=""
              />
            <p id="productNameError" class="text-danger"></p>
            </div>
            <div class="mb-3">
              <label for="exampleFormControlTextarea1" class="form-label"
                >Description</label
              >
              <textarea
                name="productDescription"
                class="form-control"
                id="productDescriptionInput"
                rows="10"
              ><%= Product.Description %></textarea>
            <p id="productDescriptionError" class="text-danger"></p>
            </div>
          </div>
          <div class="row col-6">
            <div class="col-6">
              <label for="exampleFormControlInput1" class="form-label"
                >Cost Prize</label
              >
              <input
                name="costPrize"
                type="number"
                class="form-control"
                id="costPrizeInput"
                placeholder=""
                value="<%= Product.CostPrize %>"
              />
            <p id="costPrizeError" class="text-danger"></p>
            </div>
            <div class="col-6">
              <label for="exampleFormControlInput1" class="form-label"
                >Selling Prize</label
              >
              <input
                name="sellingPrize"
                type="number"
                class="form-control"
                id="sellingPrizeInput"
                placeholder=""
                value="<%= Product.SellingPrize %>"
              />
            <p id="sellingPrizeError" class="text-danger"></p>
            </div>
            <div class="col-6">
              <label class="form-label">Category</label>
              <select id="categoryInput" name="category" class="form-control select-single-no-search">
                <% for (Category of Categories){ %>
                  <% if (Product.Category==Category.Name){ %>
                    <option selected value="<%=Category.Name%>"><%=Category.Name%></option>
                  <% }else { %>
                    <option value="<%=Category.Name%>"><%=Category.Name%></option>
                  <% } %>
                
                <% } %>
              </select>
            <p id="categoryError" class="text-danger"></p>
            </div>
            <div class="col-6">
              <label for="exampleFormControlInput1" class="form-label"
                >Quantity</label
              >
              <input
                name="quantity"
                type="number"
                class="form-control"
                id="quantityInput"
                placeholder=""
                value="<%= Product.Quantity %>"
                
              />
            <p id="quantityError" class="text-danger"></p>
            </div>
            <div class="row">
              <div class="col-6 mb-3">
                <label for="formFile" class="form-label">Update Image</label>
                <input name="img" class="form-control" type="file" id="formFile" multiple>
                <p id="formFileError" class="text-danger"></p>
              </div>
              <div class="col-3 ms-3 mb-3">
                <label for="exampleColorInput" class="form-label">Color picker</label>
                <input name="colour" type="color" value="<%= Product.Colour %>" class="form-control form-control-color" id="exampleColorInput" >
              </div>
            </div>
            
          </div>
        </div>
        <div class="col me-4 col-md-auto d-flex align-items-end justify-content-end">
          <div class="btn-group ms-1 w-100 w-md-auto">
            <button
              type="submit"
              class="btn btn-outline-primary btn-icon btn-icon-start w-100"
            >
              <i data-acorn-icon="save"></i>
              <span>Save</span>
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</main>

<script>
  function validate(){ 
  let ProductName = document.getElementById('productNameInput').value
  let ProductDescription = document.getElementById('productDescriptionInput').value
  let CostPrize = document.getElementById('costPrizeInput').value
  let SellingPrize = document.getElementById('sellingPrizeInput').value
  let Category = document.getElementById('categoryInput').value
  let Quantity = document.getElementById('quantityInput').value

  

  if (ProductName == "") {
    document.getElementById('productNameError').innerHTML='Fill This Field'
    valid1=false
  }else if(ProductName.length<3){
    document.getElementById('productNameError').innerHTML='Atleast 3 characters required'
    valid1=false
  }else{
    document.getElementById('productNameError').innerHTML=''
    valid1=true
  }


  if (ProductDescription == ""){
    document.getElementById('productDescriptionError').innerHTML='Fill This Field'
    valid2=false
  }else if(ProductDescription.length<10){
    document.getElementById('productDescriptionError').innerHTML='Atleast 10 characters required'
    valid2=false
  }else{
    document.getElementById('productDescriptionError').innerHTML=''
    valid2=true
  }

  if(CostPrize==''){
    document.getElementById('costPrizeError').innerHTML='Fill This Field'
    valid3=false
  }else{
    document.getElementById('costPrizeError').innerHTML=''
    valid3=true
  }

  if(SellingPrize==''){
    document.getElementById('sellingPrizeError').innerHTML='Fill This Field'
    valid4=false
  }else{
    document.getElementById('sellingPrizeError').innerHTML=''
    valid4=true
  }

  if(Quantity==''){
    document.getElementById('quantityError').innerHTML='Fill This Field'
    valid5=false
  }else{
    document.getElementById('quantityError').innerHTML=''
    valid5=true
  }

  

  if(Category=='Category'){
    document.getElementById('categoryError').innerHTML='Select a Category'
    valid7=false
  }else{
    document.getElementById('categoryError').innerHTML=''
    valid7=true
  }

  if(valid1&&valid2&&valid3&&valid4&&valid5&&valid7){
    return true
  }else{
    return false
  }
  }
</script>

<%- include('includes/footer') %>
